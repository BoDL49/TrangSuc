use master
go
create database shoptrangsuc
go
use shoptrangsuc
go


Create table Role(
ID IDENTITY(1,1) PRIMARY KEY,
TenRole Nvarchar(255)
)

Create table TaiKhoan (
ID IDENTITY(1,1) PRIMARY KEY,
HoVaTen Nvarchar(255),
GioiTinh bit,
NamSinh date,
SDT char(10),
Email char(255),
UserName char(100) not null,
Matkhau char not null,
Avatar Nvarchar(255),
IDRole int,
CONSTRAINT FK__TaiKhoan_Role ForgeinKey (IDRole) Role(ID)
);

Create table DiaChi(
ID IDENTITY(1,1) PrimaryKey,
IDUser int,
DiaChi Nvarchar(255),
CONSTRAINT FK_DiaChi_TaiKhoan ForgeinKey (IDuser) TaiKhoan(ID)
);

 Create table LoaiSanPham(
ID IDENTITY(1,1) PrimaryKey,
TenLoaiSanPham Nvarchar(255),
HinhLoaiSanPham Nvarchar(255)
);

Create table SanPham(
ID IDENTITY(1,1) PrimaryKey,
TenSanPham Nvarchar(255),
HinhSanPham NVarChar(255),
Gia int,
IDLoaiSanPham int,
MoTaSanPham Nvarchar(255),
SoLuongTonKho int,
TrangThaiSanPham bit,
NgayTaoSanPham date,
IdDanhGia int,
CONSTRAINT FK_SanPham _DanhGia ForeginKey (IdDanhGia) DanhGia(ID),
CONSTRAINT FK_SanPham_LoaiSanPham ForeginKey (IDLoaiSanPham) LoaiSanPham(ID)
);

Create table DanhGia(
ID IDENTITY(1,1) PrimaryKey,
Rate int
);

Create table Voucher(
ID IDENTITY(1,1) PrimaryKey,
TenVoucher Nvarchar(255),
ThongTinVoucher NvarChar,
GiaVoucher int
);

Create table DonHang(
ID IDENTITY(1,1) PrimaryKey,
IDUser int,
TongTien int,
NgayTaoHoaDon Date,
TrangThaiGiaoHang int,
TrangThaiDonHang int,
IDVoucher int,
CONSTRAINT FK_DonHang_TaiKhoan ForeignKey (IDUser) TaiKhoan(ID),
CONSTRAINT FK_DonHang_Voucher ForeignKey (IDVoucher) Voucher(ID)
);

CREATE TABLE DonHangChiTiet (
    ID INT IDENTITY(1,1) PRIMARY KEY,
    IDDonHang INT,
    IDSanPham INT,
    SoLuongSanPham INT,
    GiaSanPham INT,
    CONSTRAINT FK_DonHangChiTiet_DonHang FOREIGN KEY (IDDonHang) REFERENCES DonHang(ID),
    CONSTRAINT FK_DonHangChiTiet_SanPham FOREIGN KEY (IDSanPham) REFERENCES SanPham(ID)
);